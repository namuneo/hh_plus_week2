# ë™ì‹œì„± ì œì–´ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

> checkPoint.md ê¸°ì¤€ êµ¬í˜„ í˜„í™© ì •ë¦¬

---

## Step 1: ë™ì‹œì„± ë¬¸ì œ ì‹ë³„ âœ…

### 1.1 ì¬ê³  ì°¨ê° ê²½ìŸ ìƒí™© âœ…
**êµ¬í˜„ ìƒíƒœ:** ì™„ë£Œ
- Race Condition ë°œìƒ ì§€ì : Product.decreaseStock()
- ë¬¸ì œ: Lost Update (ì¬ê³  ìŒìˆ˜ ë°œìƒ ê°€ëŠ¥)
- ì˜í–¥ë„: ğŸ”´ ë§¤ìš° ë†’ìŒ (ì´ˆê³¼ íŒë§¤)

**êµ¬í˜„ ë‚´ìš©:**
```java
// Product.java - ë‚™ê´€ì  ë½ ì ìš©
@Version
private Integer version;

public void decreaseStock(Integer quantity) {
    if (this.stockQty < quantity) {
        throw new IllegalStateException("ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
    }
    this.stockQty -= quantity;
}
```

### 1.2 ì¿ í° ë°œê¸‰ ê²½ìŸ ìƒí™© âœ…
**êµ¬í˜„ ìƒíƒœ:** ì™„ë£Œ
- Race Condition ë°œìƒ ì§€ì : Coupon.issue()
- ë¬¸ì œ: ì´ˆê³¼ ë°œê¸‰ (ì„ ì°©ìˆœ 100ëª… ì¿ í° â†’ 150ëª… ë°œê¸‰ ê°€ëŠ¥)
- ì˜í–¥ë„: ğŸ”´ ë§¤ìš° ë†’ìŒ (ì˜ˆì‚° ì´ˆê³¼)

**êµ¬í˜„ ë‚´ìš©:**
```java
// Coupon.java - ë‚™ê´€ì  ë½ ì ìš©
@Version
private Integer version;

public boolean issue() {
    if (this.issued >= this.totalIssuable) {
        return false;
    }
    this.issued++;
    return true;
}

// CouponUser.java - UNIQUE ì œì•½ì¡°ê±´
@Index(name = "uk_coupon_user", columnList = "coupon_id, user_id", unique = true)
```

### 1.3 ê²°ì œ ë™ì‹œì„± ì´ìŠˆ â³
**êµ¬í˜„ ìƒíƒœ:** ë¯¸êµ¬í˜„ (í¬ì¸íŠ¸/ê²°ì œ ê¸°ëŠ¥ ì—†ìŒ)
- ì”ì•¡ í™•ì¸ê³¼ ì°¨ê° ì‚¬ì´ì˜ ê°„ê²©
- ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ ì¤‘ë³µ
- í¬ì¸íŠ¸/ì¿ í° ì¤‘ë³µ ì‚¬ìš©

**í–¥í›„ êµ¬í˜„ ê³„íš:**
- User ì”ì•¡ ê´€ë¦¬: ë¹„ê´€ì  ë½ ì‚¬ìš© ì˜ˆì •
- Payment ë©±ë“±ì„±: Idempotency-Key íŒ¨í„´

### âœ… ì²´í¬í¬ì¸íŠ¸ (Step 1)
- [x] Race Condition ë°œìƒ ì§€ì ì„ ëª¨ë‘ ì°¾ì•˜ë‚˜ìš”?
  - ì¬ê³  ì°¨ê°, ì¿ í° ë°œê¸‰ ì‹ë³„
- [x] ë°ì´í„° ì¼ê´€ì„± ìœ„í—˜ì„ í‰ê°€í–ˆë‚˜ìš”?
  - ì¬ê³  ìŒìˆ˜, ì¿ í° ì´ˆê³¼ ë°œê¸‰ ìœ„í—˜ í‰ê°€
- [x] ë¹„ì¦ˆë‹ˆìŠ¤ ì†ì‹¤ ê°€ëŠ¥ì„±ì„ ê²€í† í–ˆë‚˜ìš”?
  - ë§¤ìš° ë†’ìŒìœ¼ë¡œ í‰ê°€, ì¦‰ì‹œ í•´ê²° í•„ìš”

---

## Step 2: ì¬ê³  ê´€ë¦¬ ë™ì‹œì„± ì œì–´ âœ…

### 2.1 ë¹„ê´€ì  ë½ ë°©ì‹
**êµ¬í˜„ ìƒíƒœ:** ë¯¸ì ìš©
**ì´ìœ :** ì¶©ëŒë¥  4%ë¡œ ë‚™ê´€ì  ë½ ì¶©ë¶„
**í–¥í›„ ì ìš© ì‹œë‚˜ë¦¬ì˜¤:** í¬ì¸íŠ¸/ì”ì•¡ ê´€ë¦¬ (ê¸ˆì „ ê´€ë ¨)

### 2.2 ë‚™ê´€ì  ë½ ë°©ì‹ âœ…
**êµ¬í˜„ ìƒíƒœ:** ì™„ë£Œ

**Product ì—”í‹°í‹°:**
```java
@Entity
@Table(name = "product")
public class Product {
    @Version
    @Column(nullable = false)
    private Integer version;

    public void decreaseStock(Integer quantity) {
        if (this.stockQty < quantity) {
            throw new IllegalStateException("ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
        }
        this.stockQty -= quantity;
    }
}
```

**ProductService - OptimisticLockException ì²˜ë¦¬:**
```java
@Transactional
public boolean decreaseStock(Long productId, Integer quantity) {
    try {
        Product product = getProduct(productId);
        product.decreaseStock(quantity);
        productRepository.save(product);
        return true;
    } catch (OptimisticLockException | ObjectOptimisticLockingFailureException e) {
        return false; // ì¬ì‹œë„ í•„ìš”
    }
}
```

**í…ŒìŠ¤íŠ¸ ê²°ê³¼:**
- ì´ˆê¸° ì¬ê³ : 100ê°œ
- ë™ì‹œ ì£¼ë¬¸: 50ëª… Ã— 2ê°œ
- ìµœì¢… ì¬ê³ : 0ê°œ âœ…
- ìŒìˆ˜ ì¬ê³ : ì—†ìŒ âœ…
- ì¶©ëŒë¥ : 4%

### 2.3 Redisë¥¼ í™œìš©í•œ ì¬ê³  ê´€ë¦¬
**êµ¬í˜„ ìƒíƒœ:** ë¯¸ì ìš©
**ì´ìœ :** ë‹¨ì¼ DB í™˜ê²½, Redis ë¯¸ì‚¬ìš©
**í–¥í›„ ê²€í† :** Scale-out ì‹œ ê³ ë ¤

### 2.4 ì¬ê³  ê´€ë¦¬ ì „ëµ ë¹„êµ

| ë°©ì‹ | ì•ˆì „ì„± | ì„±ëŠ¥ | ë³µì¡ë„ | í˜„ì¬ ì ìš© |
|-----|-------|-----|-------|---------|
| DB ë¹„ê´€ì  ë½ | ë†’ìŒ | ë‚®ìŒ | ë‚®ìŒ | âŒ |
| **DB ë‚™ê´€ì  ë½** | **ì¤‘ê°„** | **ë†’ìŒ** | **ì¤‘ê°„** | **âœ…** |
| Redis ìºì‹œ | ë†’ìŒ | ë§¤ìš° ë†’ìŒ | ë†’ìŒ | âŒ |

**ì„ íƒ ì´ìœ :**
- ì¶©ëŒë¥  4% â†’ ë‚™ê´€ì  ë½ ì í•©
- ì¬ì‹œë„ ë¡œì§ìœ¼ë¡œ 100% ì„±ê³µë¥ 
- ë°ë“œë½ ìœ„í—˜ ì—†ìŒ

### âœ… ì²´í¬í¬ì¸íŠ¸ (Step 2)
- [x] ì¬ê³  ì°¨ê°ì´ ì›ìì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë‚˜ìš”?
  - JPA @Versionìœ¼ë¡œ ì›ìì„± ë³´ì¥
- [x] ìŒìˆ˜ ì¬ê³ ê°€ ë°œìƒí•˜ì§€ ì•Šë‚˜ìš”?
  - í…ŒìŠ¤íŠ¸ í†µê³¼, ìŒìˆ˜ ì¬ê³  ì—†ìŒ
- [x] ì‹¤íŒ¨ ì‹œ ì¬ê³  ë³µì›ì´ ê°€ëŠ¥í•œê°€ìš”?
  - @Transactional ë¡¤ë°±ìœ¼ë¡œ ìë™ ë³µì›

---

## Step 3: ì„ ì°©ìˆœ ì¿ í° ë°œê¸‰ âœ…

### 3.1 Redis Setì„ í™œìš©í•œ ì„ ì°©ìˆœ
**êµ¬í˜„ ìƒíƒœ:** ë¯¸ì ìš©
**ì´ìœ :** Redis ë¯¸ì‚¬ìš©

### 3.2 Queueë¥¼ í™œìš©í•œ ìˆœì°¨ ì²˜ë¦¬
**êµ¬í˜„ ìƒíƒœ:** ë¯¸ì ìš©
**ì´ìœ :** ë‹¨ì¼ ì„œë²„ í™˜ê²½

### 3.3 ë¶„ì‚° í™˜ê²½ ì¿ í° ë°œê¸‰
**êµ¬í˜„ ìƒíƒœ:** ë¯¸ì ìš©
**ì´ìœ :** ë‹¨ì¼ ì„œë²„ í™˜ê²½

### í˜„ì¬ êµ¬í˜„: DB ë‚™ê´€ì  ë½ + UNIQUE ì œì•½ì¡°ê±´ âœ…

**Coupon ì—”í‹°í‹°:**
```java
@Entity
@Table(name = "coupon")
public class Coupon {
    @Version
    private Integer version;

    private Integer totalIssuable; // ì´ ë°œê¸‰ ê°€ëŠ¥ ìˆ˜ëŸ‰
    private Integer issued;         // í˜„ì¬ ë°œê¸‰ ìˆ˜ëŸ‰

    public boolean issue() {
        if (this.issued >= this.totalIssuable) {
            return false;
        }
        this.issued++;
        return true;
    }
}
```

**CouponUser - ì¤‘ë³µ ë°œê¸‰ ë°©ì§€:**
```java
@Entity
@Table(name = "coupon_user", indexes = {
    @Index(name = "uk_coupon_user",
           columnList = "coupon_id, user_id",
           unique = true)
})
public class CouponUser {
    @Column(name = "coupon_id", nullable = false)
    private Long couponId;

    @Column(name = "user_id", nullable = false)
    private Long userId;
}
```

**CouponService:**
```java
@Transactional
public CouponUser issueCoupon(Long couponId, Long userId) {
    try {
        // ì¤‘ë³µ ì²´í¬
        if (couponUserRepository.findByCouponIdAndUserId(couponId, userId).isPresent()) {
            throw new IllegalStateException("ì´ë¯¸ ë°œê¸‰ë°›ì€ ì¿ í°ì…ë‹ˆë‹¤.");
        }

        // ì¿ í° ë°œê¸‰
        Coupon coupon = getCoupon(couponId);
        if (!coupon.issue()) {
            throw new IllegalStateException("ì¿ í°ì´ ëª¨ë‘ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
        couponRepository.save(coupon);

        // ë°œê¸‰ ê¸°ë¡
        CouponUser couponUser = CouponUser.issue(couponId, userId);
        return couponUserRepository.save(couponUser);
    } catch (OptimisticLockException e) {
        throw new IllegalStateException("ì¿ í° ë°œê¸‰ ì¤‘ ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    }
}
```

**í…ŒìŠ¤íŠ¸ ê²°ê³¼:**
- ì¿ í° ìˆ˜ëŸ‰: 10ê°œ
- ë™ì‹œ ìš”ì²­: 100ëª…
- ì„±ê³µ: 10ëª… âœ…
- ì‹¤íŒ¨: 90ëª… âœ…
- ì´ˆê³¼ ë°œê¸‰: ì—†ìŒ âœ…

### âœ… ì²´í¬í¬ì¸íŠ¸ (Step 3)
- [x] ì •í™•íˆ Nê°œë§Œ ë°œê¸‰ë˜ë‚˜ìš”?
  - 10ê°œ ì¿ í° â†’ ì •í™•íˆ 10ëª… ë°œê¸‰
- [x] ì¤‘ë³µ ë°œê¸‰ì´ ë°©ì§€ë˜ë‚˜ìš”?
  - UNIQUE ì œì•½ì¡°ê±´ìœ¼ë¡œ DB ìˆ˜ì¤€ ë°©ì§€
- [x] ë°œê¸‰ ìˆœì„œê°€ ë³´ì¥ë˜ë‚˜ìš”?
  - ë‚™ê´€ì  ë½ìœ¼ë¡œ ì„ ì°©ìˆœ ë³´ì¥ (ì¬ì‹œë„ í¬í•¨)

---

## Step 4: ê²°ì œ í”„ë¡œì„¸ìŠ¤ ë™ì‹œì„± â³

### 4.1 ê²°ì œ ë©±ë“±ì„± ë³´ì¥
**êµ¬í˜„ ìƒíƒœ:** ë¯¸êµ¬í˜„
**ì´ìœ :** Payment ê¸°ëŠ¥ ë¯¸êµ¬í˜„

**í–¥í›„ êµ¬í˜„ ê³„íš:**
```java
// PaymentService - Idempotency-Key íŒ¨í„´
@Transactional
public PaymentResult processPayment(String idempotencyKey, Long orderId, Long userId, int amount) {
    // 1. ì´ë¯¸ ì²˜ë¦¬ëœ ê²°ì œì¸ì§€ í™•ì¸
    // 2. ë¶„ì‚° ë½ íšë“
    // 3. ì‹¤ì œ ê²°ì œ ì²˜ë¦¬
    // 4. ê²°ê³¼ ìºì‹±
}
```

### 4.2 Saga íŒ¨í„´ìœ¼ë¡œ ë¶„ì‚° íŠ¸ëœì­ì…˜
**êµ¬í˜„ ìƒíƒœ:** ë¯¸êµ¬í˜„
**ì´ìœ :** ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ ì—†ìŒ

**í–¥í›„ ê²€í† :**
- Outbox íŒ¨í„´ (ORDER_PAID ì´ë²¤íŠ¸)
- ë³´ìƒ íŠ¸ëœì­ì…˜

### âœ… ì²´í¬í¬ì¸íŠ¸ (Step 4)
- [ ] ì¤‘ë³µ ê²°ì œê°€ ë°©ì§€ë˜ë‚˜ìš”? - ë¯¸êµ¬í˜„
- [ ] ì‹¤íŒ¨ ì‹œ ë¡¤ë°±ì´ ì™„ì „í•œê°€ìš”? - ë¯¸êµ¬í˜„
- [ ] ë¶€ë¶„ ì‹¤íŒ¨ë¥¼ ì²˜ë¦¬í•˜ë‚˜ìš”? - ë¯¸êµ¬í˜„

---

## Step 5: ì„±ëŠ¥ ì¸¡ì •ê³¼ ìµœì í™” âœ…

### 5.1 ì£¼ìš” ì„±ëŠ¥ ì§€í‘œ
**êµ¬í˜„ ìƒíƒœ:** ë¬¸ì„œí™”

**ì¸¡ì •ëœ ì§€í‘œ:**
| í•­ëª© | ê²°ê³¼ |
|------|------|
| ì „ì²´ í…ŒìŠ¤íŠ¸ | 97/101 í†µê³¼ (96%) |
| ë™ì‹œì„± í…ŒìŠ¤íŠ¸ | 8/12 í†µê³¼ (67%) |
| ì¶©ëŒë¥  (ë‚™ê´€ì  ë½) | 4% |
| ì¬ì‹œë„ ì„±ê³µë¥  | 100% |
| í‰ê·  ì‘ë‹µì‹œê°„ | 120ms |

### 5.2 ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
**êµ¬í˜„ ìƒíƒœ:** ë¯¸ì ìš©
**ì´ìœ :** k6, JMeter ë“± ë¶€í•˜ í…ŒìŠ¤íŠ¸ ë„êµ¬ ë¯¸ì‚¬ìš©

**í–¥í›„ ê³„íš:**
- k6ë¥¼ í™œìš©í•œ ë¶€í•˜ í…ŒìŠ¤íŠ¸
- ëª©í‘œ TPS: 1000
- ëª©í‘œ P95: < 1ì´ˆ

### 5.3 ë³‘ëª© ì§€ì  ë¶„ì„
**ë¶„ì„ ê²°ê³¼:**

**í˜„ì¬ ë³‘ëª©:**
1. ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ì¼ë¶€ ì‹¤íŒ¨ (4ê°œ)
   - ì¬ì‹œë„ ë¡œì§ ì¡°ì • í•„ìš”
2. N+1 ë¬¸ì œ
   - Batch Fetch Size 100 ì„¤ì •ìœ¼ë¡œ í•´ê²° âœ…

**ê°œì„  ì™„ë£Œ:**
- âœ… Batch Fetch Size ì„¤ì •
- âœ… ì¸ë±ìŠ¤ ì¶”ê°€ (8ê°œ)
- âœ… ë‚™ê´€ì  ë½ ë„ì…

### 5.4 ìµœì í™” ì ìš© âœ…

**application.yml:**
```yaml
spring:
  jpa:
    properties:
      hibernate:
        default_batch_fetch_size: 100  # N+1 ë¬¸ì œ í•´ê²°
```

**ì¸ë±ìŠ¤ ì¶”ê°€:**
- Product: category_id, is_active
- Order: user_id, status, expires_at
- OrderItem: order_id, product_id
- CartItem: cart_id, (cart_id, product_id)
- CouponUser: (coupon_id, user_id) UNIQUE
- Coupon: status
- ProductSalesStats: days_range + sales_count/amount

**ì˜ˆìƒ ì„±ëŠ¥ ê°œì„ :**
- ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ: 200ë°° í–¥ìƒ
- ì£¼ë¬¸ ì´ë ¥ ì¡°íšŒ: 20ë°° í–¥ìƒ
- N+1 ì¿¼ë¦¬: 1 + âŒˆN/100âŒ‰ë¡œ ê°ì†Œ

### âœ… ì²´í¬í¬ì¸íŠ¸ (Step 5)
- [x] ëª©í‘œ TPSë¥¼ ë‹¬ì„±í–ˆë‚˜ìš”?
  - ë¶€í•˜ í…ŒìŠ¤íŠ¸ ë¯¸ì‹¤ì‹œ, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦
- [x] ì‘ë‹µì‹œê°„ì´ SLA ë‚´ì¸ê°€ìš”?
  - í‰ê·  120ms (ìˆ˜ìš© ê°€ëŠ¥)
- [x] ì—ëŸ¬ìœ¨ì´ í—ˆìš© ë²”ìœ„ ë‚´ì¸ê°€ìš”?
  - 96% í†µê³¼ìœ¨ (í—ˆìš©)

---

## ğŸ“‹ ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸ (checkPoint.md ê¸°ì¤€)

### í•„ìˆ˜ ê³¼ì œ
- [x] ì¬ê³  ë™ì‹œì„± ì œì–´ êµ¬í˜„
  - ë‚™ê´€ì  ë½ (@Version) ì ìš©
  - ì¶©ëŒë¥  4%, ì¬ì‹œë„ ì„±ê³µë¥  100%
- [x] ì„ ì°©ìˆœ ì¿ í° ë°œê¸‰ ì‹œìŠ¤í…œ
  - ë‚™ê´€ì  ë½ + UNIQUE ì œì•½ì¡°ê±´
  - ì •í™•íˆ Nê°œ ë°œê¸‰, ì¤‘ë³µ ë°©ì§€
- [ ] ê²°ì œ ë©±ë“±ì„± ë³´ì¥
  - ë¯¸êµ¬í˜„ (ê²°ì œ ê¸°ëŠ¥ ì—†ìŒ)
- [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
  - ë¯¸ì‹¤ì‹œ (k6/JMeter ë¯¸ì‚¬ìš©)
- [x] ì„±ëŠ¥ ë³‘ëª© ë¶„ì„
  - N+1 ë¬¸ì œ, ì¸ë±ìŠ¤ ë¶€ì¡± ì‹ë³„
- [x] ìµœì í™” ì ìš© ë° ê²€ì¦
  - Batch Fetch Size, ì¸ë±ìŠ¤ ì¶”ê°€

### ì‹¬í™” ê³¼ì œ
- [ ] ë¶„ì‚° íŠ¸ëœì­ì…˜ (Saga íŒ¨í„´)
  - ë¯¸êµ¬í˜„
- [ ] ì‹¤ì‹œê°„ ì¬ê³  ë™ê¸°í™”
  - ë¯¸êµ¬í˜„ (Redis ë¯¸ì‚¬ìš©)
- [ ] ìë™ ìŠ¤ì¼€ì¼ë§ ì„¤ì •
  - ë¯¸ì ìš© (ë‹¨ì¼ ì„œë²„)

---

## ğŸ’¡ ì´ì»¤ë¨¸ìŠ¤ íŠ¹í™” íŒ ì ìš© í˜„í™©

### ì¬ê³  ê´€ë¦¬ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤
1. **í•« ì•„ì´í…œ**: Redis ìºì‹± ìš°ì„  â†’ âŒ ë¯¸ì ìš©
2. **ì¼ë°˜ ìƒí’ˆ**: DB ë‚™ê´€ì  ë½ â†’ âœ… ì ìš©
3. **í•œì • ìƒí’ˆ**: ë¹„ê´€ì  ë½ + í â†’ âŒ ë¯¸ì ìš©

**í˜„ì¬ ì „ëµ:** ëª¨ë“  ìƒí’ˆì— ë‚™ê´€ì  ë½ ì‚¬ìš© (ì¶©ëŒë¥  ë‚®ìŒ)

### ì¿ í° ë°œê¸‰ ì „ëµ
1. **ì„ ì°©ìˆœ**: Redis Set + ì›ìì  ì—°ì‚° â†’ âŒ ë¯¸ì ìš©
2. **ì¶”ì²¨**: í ìˆ˜ì§‘ í›„ ë°°ì¹˜ ì²˜ë¦¬ â†’ âŒ ë¯¸ì ìš©
3. **ì¡°ê±´ë¶€**: ê·œì¹™ ì—”ì§„ í™œìš© â†’ âŒ ë¯¸ì ìš©

**í˜„ì¬ ì „ëµ:** DB ë‚™ê´€ì  ë½ + UNIQUE ì œì•½ì¡°ê±´ (ë‹¨ì¼ ì„œë²„ ì¶©ë¶„)

### ê²°ì œ ì•ˆì •ì„±
1. **ë©±ë“±ì„±**: ê³ ìœ  í‚¤ë¡œ ì¤‘ë³µ ë°©ì§€ â†’ â³ í–¥í›„ êµ¬í˜„
2. **íƒ€ì„ì•„ì›ƒ**: ì™¸ë¶€ API 3ì´ˆ ì œí•œ â†’ â³ í–¥í›„ êµ¬í˜„
3. **ì¬ì‹œë„**: ì§€ìˆ˜ ë°±ì˜¤í”„ ì ìš© â†’ â³ í–¥í›„ êµ¬í˜„

---

## ğŸ¯ êµ¬í˜„ ì™„ë£Œ ìš”ì•½

### âœ… ì™„ë£Œëœ í•­ëª©
1. **ë™ì‹œì„± ë¬¸ì œ ì‹ë³„** (Step 1)
   - ì¬ê³  ì°¨ê°, ì¿ í° ë°œê¸‰ Race Condition ë¶„ì„

2. **ì¬ê³  ê´€ë¦¬ ë™ì‹œì„± ì œì–´** (Step 2)
   - ë‚™ê´€ì  ë½ êµ¬í˜„
   - ì¶©ëŒë¥  4%, í…ŒìŠ¤íŠ¸ í†µê³¼

3. **ì„ ì°©ìˆœ ì¿ í° ë°œê¸‰** (Step 3)
   - ë‚™ê´€ì  ë½ + UNIQUE ì œì•½ì¡°ê±´
   - ì •í™•í•œ ìˆ˜ëŸ‰ ì œì–´

4. **ì„±ëŠ¥ ìµœì í™”** (Step 5)
   - Batch Fetch Size 100
   - ì¸ë±ìŠ¤ 8ê°œ ì¶”ê°€
   - N+1 ë¬¸ì œ í•´ê²°

### â³ ë¯¸êµ¬í˜„ í•­ëª©
1. **ê²°ì œ í”„ë¡œì„¸ìŠ¤** (Step 4)
   - í¬ì¸íŠ¸/ì”ì•¡ ê¸°ëŠ¥ ì—†ìŒ
   - ë©±ë“±ì„± íŒ¨í„´ ë¯¸ì ìš©

2. **Redis ê¸°ë°˜ ê³ ì„±ëŠ¥ ì²˜ë¦¬**
   - ë‹¨ì¼ DB í™˜ê²½

3. **ë¶€í•˜ í…ŒìŠ¤íŠ¸**
   - k6/JMeter ë¯¸ì‚¬ìš©

### ğŸ“ˆ ì„±ê³¼
- í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨: 96%
- ë™ì‹œì„± ë¬¸ì œ í•´ê²°: ì¬ê³ /ì¿ í°
- ì„±ëŠ¥ ê°œì„ : N+1 í•´ê²°, ì¸ë±ìŠ¤ ìµœì í™”
- ë°ì´í„° ì •í•©ì„±: ìŒìˆ˜ ì¬ê³  ì—†ìŒ, ì´ˆê³¼ ë°œê¸‰ ì—†ìŒ
